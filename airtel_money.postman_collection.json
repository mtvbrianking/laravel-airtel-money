{
    "info": {
        "_postman_id": "d1f583e7-34e6-4b96-a314-e54b434f81b4",
        "name": "Airtel Money",
        "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
    },
    "item": [
        {
            "name": "Collection",
            "item": [
                {
                    "name": "Receive",
                    "request": {
                        "auth": {
                            "type": "bearer",
                            "bearer": [
                                {
                                    "key": "token",
                                    "value": "{{access_token}}",
                                    "type": "string"
                                }
                            ]
                        },
                        "method": "POST",
                        "header": [
                            {
                                "key": "X-Country",
                                "value": "{{country}}",
                                "type": "default"
                            },
                            {
                                "key": "X-Currency",
                                "value": "{{currency}}",
                                "type": "default"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"reference\": \"Collection\",\n    \"subscriber\": {\n        \"country\": \"{{client_id}}\",\n        \"currency\": \"{{client_secret}}\",\n        \"msisdn\": \"700123123\"\n    },\n    \"transaction\": {\n        \"amount\": 500,\n        \"country\": \"{{client_id}}\",\n        \"currency\": \"{{client_secret}}\",\n        \"id\": \"7ff3afe8-36e6-4a18-aec3-71fee3f04e78\"\n    }\n}",
                            "options": {
                                "raw": {
                                    "language": "json"
                                }
                            }
                        },
                        "url": {
                            "raw": "{{base_uri}}/merchant/v2/payments/",
                            "host": [
                                "{{base_uri}}"
                            ],
                            "path": [
                                "merchant",
                                "v2",
                                "payments",
                                ""
                            ]
                        }
                    },
                    "response": []
                },
                {
                    "name": "Refund",
                    "request": {
                        "auth": {
                            "type": "bearer",
                            "bearer": [
                                {
                                    "key": "token",
                                    "value": "{{access_token}}",
                                    "type": "string"
                                }
                            ]
                        },
                        "method": "POST",
                        "header": [
                            {
                                "key": "X-Country",
                                "value": "{{country}}",
                                "type": "default"
                            },
                            {
                                "key": "X-Currency",
                                "value": "{{currency}}",
                                "type": "default"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"transaction\": {\n        \"airtel_money_id\": \"13624ff1-24b1-4aee-82ff-231437c9785d\"\n    }\n}",
                            "options": {
                                "raw": {
                                    "language": "json"
                                }
                            }
                        },
                        "url": {
                            "raw": "{{base_uri}}/standard/v1/payments/refund",
                            "host": [
                                "{{base_uri}}"
                            ],
                            "path": [
                                "standard",
                                "v1",
                                "payments",
                                "refund"
                            ]
                        }
                    },
                    "response": []
                },
                {
                    "name": "GetTransaction",
                    "request": {
                        "auth": {
                            "type": "bearer",
                            "bearer": [
                                {
                                    "key": "token",
                                    "value": "{{access_token}}",
                                    "type": "string"
                                }
                            ]
                        },
                        "method": "GET",
                        "header": [
                            {
                                "key": "X-Country",
                                "value": "{{country}}",
                                "type": "default"
                            },
                            {
                                "key": "X-Currency",
                                "value": "{{currency}}",
                                "type": "default"
                            }
                        ],
                        "url": {
                            "raw": "{{base_uri}}/standard/v1/payments/:transactionId",
                            "host": [
                                "{{base_uri}}"
                            ],
                            "path": [
                                "standard",
                                "v1",
                                "payments",
                                ":transactionId"
                            ],
                            "variable": [
                                {
                                    "key": "transactionId",
                                    "value": "44edfc9f-d85a-46e0-b0d6-7c9b0e82491a"
                                }
                            ]
                        }
                    },
                    "response": []
                },
                {
                    "name": "GetBalance",
                    "request": {
                        "auth": {
                            "type": "bearer",
                            "bearer": [
                                {
                                    "key": "token",
                                    "value": "{{access_token}}",
                                    "type": "string"
                                }
                            ]
                        },
                        "method": "GET",
                        "header": [
                            {
                                "key": "X-Country",
                                "value": "{{country}}",
                                "type": "default"
                            },
                            {
                                "key": "X-Currency",
                                "value": "{{currency}}",
                                "type": "default"
                            }
                        ],
                        "url": {
                            "raw": "{{base_uri}}/standard/v1/users/balance",
                            "host": [
                                "{{base_uri}}"
                            ],
                            "path": [
                                "standard",
                                "v1",
                                "users",
                                "balance"
                            ]
                        }
                    },
                    "response": []
                }
            ]
        },
        {
            "name": "Disbursement",
            "item": [
                {
                    "name": "Send",
                    "request": {
                        "auth": {
                            "type": "bearer",
                            "bearer": [
                                {
                                    "key": "token",
                                    "value": "{{access_token}}",
                                    "type": "string"
                                }
                            ]
                        },
                        "method": "POST",
                        "header": [
                            {
                                "key": "X-Country",
                                "value": "{{country}}",
                                "type": "default"
                            },
                            {
                                "key": "X-Currency",
                                "value": "{{currency}}",
                                "type": "default"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"payee\": {\n        \"msisdn\": \"700160185\"\n    },\n    \"reference\": \"Disbursement\",\n    \"pin\": \"{{encypted_pin}}\",\n    \"transaction\": {\n        \"amount\": 500,\n        \"id\": \"b48b69e9-417e-4f97-84b6-3d7aa2e4eef6\"\n    }\n}",
                            "options": {
                                "raw": {
                                    "language": "json"
                                }
                            }
                        },
                        "url": {
                            "raw": "{{base_uri}}/standard/v1/disbursements/",
                            "host": [
                                "{{base_uri}}"
                            ],
                            "path": [
                                "standard",
                                "v1",
                                "disbursements",
                                ""
                            ]
                        }
                    },
                    "response": []
                },
                {
                    "name": "GetTransaction",
                    "request": {
                        "auth": {
                            "type": "bearer",
                            "bearer": [
                                {
                                    "key": "token",
                                    "value": "{{access_token}}",
                                    "type": "string"
                                }
                            ]
                        },
                        "method": "GET",
                        "header": [
                            {
                                "key": "X-Country",
                                "value": "{{country}}",
                                "type": "default"
                            },
                            {
                                "key": "X-Currency",
                                "value": "{{currency}}",
                                "type": "default"
                            }
                        ],
                        "url": {
                            "raw": "{{base_uri}}/standard/v1/payments/:transactionId",
                            "host": [
                                "{{base_uri}}"
                            ],
                            "path": [
                                "standard",
                                "v1",
                                "payments",
                                ":transactionId"
                            ],
                            "variable": [
                                {
                                    "key": "transactionId",
                                    "value": "44edfc9f-d85a-46e0-b0d6-7c9b0e82491a"
                                }
                            ]
                        }
                    },
                    "response": []
                }
            ]
        },
        {
            "name": "GetToken",
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "exec": [
                            "var response = pm.response.json();",
                            "pm.collectionVariables.set(\"access_token\", response.access_token);"
                        ],
                        "type": "text/javascript"
                    }
                }
            ],
            "request": {
                "auth": {
                    "type": "basic",
                    "basic": [
                        {
                            "key": "password",
                            "value": "{{client_secret}}",
                            "type": "string"
                        },
                        {
                            "key": "username",
                            "value": "{{client_id}}",
                            "type": "string"
                        }
                    ]
                },
                "method": "POST",
                "header": [],
                "body": {
                    "mode": "raw",
                    "raw": "{\n    \"grant_type\": \"client_credentials\"\n}",
                    "options": {
                        "raw": {
                            "language": "json"
                        }
                    }
                },
                "url": {
                    "raw": "{{base_uri}}/auth/oauth2/token",
                    "host": [
                        "{{base_uri}}"
                    ],
                    "path": [
                        "auth",
                        "oauth2",
                        "token"
                    ]
                }
            },
            "response": []
        },
        {
            "name": "GetUser",
            "request": {
                "auth": {
                    "type": "bearer",
                    "bearer": [
                        {
                            "key": "token",
                            "value": "{{access_token}}",
                            "type": "string"
                        }
                    ]
                },
                "method": "GET",
                "header": [
                    {
                        "key": "X-Country",
                        "value": "{{country}}",
                        "type": "default"
                    },
                    {
                        "key": "X-Currency",
                        "value": "{{currency}}",
                        "type": "default"
                    }
                ],
                "url": {
                    "raw": "{{base_uri}}/standard/v1/users/:phoneNumber",
                    "host": [
                        "{{base_uri}}"
                    ],
                    "path": [
                        "standard",
                        "v1",
                        "users",
                        ":phoneNumber"
                    ],
                    "variable": [
                        {
                            "key": "phoneNumber",
                            "value": "700123123"
                        }
                    ]
                }
            },
            "response": []
        }
    ],
    "event": [
        {
            "listen": "prerequest",
            "script": {
                "type": "text/javascript",
                "exec": [
                    ""
                ]
            }
        },
        {
            "listen": "test",
            "script": {
                "type": "text/javascript",
                "exec": [
                    ""
                ]
            }
        }
    ],
    "variable": [
        {
            "key": "base_uri",
            "value": "https://openapiuat.airtel.africa",
            "type": "default"
        },
        {
            "key": "client_id",
            "value": "",
            "type": "default"
        },
        {
            "key": "client_secret",
            "value": "",
            "type": "default"
        },
        {
            "key": "access_token",
            "value": "",
            "type": "default"
        },
        {
            "key": "country",
            "value": "UG",
            "type": "default"
        },
        {
            "key": "currency",
            "value": "UGX",
            "type": "default"
        },
        {
            "key": "encypted_pin",
            "value": "",
            "type": "default"
        }
    ]
}